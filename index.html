<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script>
      // This is the "Game Logic"
      AFRAME.registerComponent('destructible', {
        init: function () {
          this.el.addEventListener('click', () => {
            // 1. Create a "shatter" effect by spawning small cubes
            for (let i = 0; i < 5; i++) {
              let fragment = document.createElement('a-box');
              fragment.setAttribute('width', '0.2');
              fragment.setAttribute('height', '0.2');
              fragment.setAttribute('depth', '0.2');
              fragment.setAttribute('color', 'red');
              fragment.setAttribute('position', this.el.getAttribute('position'));
              // Give them a simple animation to "fly away"
              fragment.setAttribute('animation', `property: position; to: ${Math.random()*2-1} ${Math.random()*2} ${Math.random()*-5}; dur: 500`);
              this.el.sceneEl.appendChild(fragment);
              
              // Remove fragments after a second
              setTimeout(() => fragment.remove(), 1000);
            }
            
            // 2. Remove the original box
            this.el.remove();
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene background="color: #111" cursor="rayOrigin: mouse">
      
      <a-box id="target" destructible position="0 1.5 -3" color="red" animation="property: rotation; to: 0 360 0; loop: true; dur: 4000"></a-box>

      <a-grid></a-grid>

      <a-entity laser-controls="hand: right" raycaster="objects: [destructible]"></a-entity>
      <a-entity laser-controls="hand: left" raycaster="objects: [destructible]"></a-entity>

      <a-sky color="#222"></a-sky>
    </a-scene>
  </body>
</html>
